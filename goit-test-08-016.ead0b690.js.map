{"mappings":"AA8GkB,MAAZA,EAAUC,SAASC,cAAc,YACjCC,EAAUF,SAASC,cAAc,eAEvCF,EAAQI,mBAAmB,YAAaC,KACxCL,EAAQM,iBAAiB,SAkDzB,SAAiBC,GACb,GAAKA,EAAIC,OAAOC,YA+BZC,MAAM,eA/BmB,CACzBH,EAAIC,OAAOC,YAAcE,EAEzB,MAAMC,EAAKC,OAAON,EAAIC,OAAOM,QAAQF,IAErC,IAAIG,GAAS,EAEE,MAAXJ,GACAK,EAAMC,KAAKL,GAEXM,aAAaC,QA1DX,UA0D0BC,KAAKC,UAAUL,IAC3CD,EAASO,EAASN,KAElBO,EAAMN,KAAKL,GACXM,aAAaC,QA7DX,UA6D0BC,KAAKC,UAAUE,IAC3CR,EAASO,EAASC,IAGtBC,YAAW,KACP,GAAIT,EAGA,OAFAL,MAAM,UAAUC,UAChBc,IAGJd,EAAoB,MAAXA,EAAiB,IAAM,GAAG,G,KA1E/CR,EAAQG,iBAAiB,QAASmB,GAKlC,IAAId,EAAS,IAETK,EAAQI,KAAKM,MAAMR,aAAaS,QALtB,aAKyC,GACnDJ,EAAQH,KAAKM,MAAMR,aAAaS,QALtB,aAKyC,GAEvD,MAAMC,EAAM,CACR,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAuBX,SAASvB,IACL,IAAIwB,EAAS,GACb,IAAK,IAAIC,EAAI,EAAGA,GAAK,EAAGA,GAAK,EACzBD,GAAU,8BAA8BC,YAE5C,OAAOD,C,CAuCX,SAASP,EAASS,GACd,OAAOH,EAAII,MAAMC,GAEbA,EAAKC,OAAOtB,GAERmB,EAAII,SAASvB,M,CAKzB,SAASa,IACLd,EAAS,IACTK,EAAQ,GACRO,EAAQ,GAIRL,aAAakB,QAEbpC,EAAQqC,UAAYhC,G,CAhFpB,IAAIL,EAAQsC,UAAUC,SAAQN,IAE1B,MAAMrB,EAAKC,OAAOoB,EAAKnB,QAAQF,IAM3BI,EAAMmB,SAASvB,GACfqB,EAAKxB,YAAc,IACZc,EAAMY,SAASvB,KACtBqB,EAAKxB,YAAc,IAAG","sources":["src/js/goit-test-08-016.js"],"sourcesContent":["\"use strict\";\n\n\n// <!-- Лекция 04.11.2022 -->\n\n\n// // 1. SessionStorage и LocalStorage\n\n// const session = document.querySelector('.session');\n// const local = document.querySelector('.local');\n// const remove = document.querySelector('.remove');\n\n// session.addEventListener('click', onSession);\n// const arr = [1,2,3,4];\n\n// function onSession() {\n//     // sessionStorage.setItem('session', 'hello session');\n//     // sessionStorage.setItem('session', arr);\n//     // localStorage.getItem('local');\n//     // console.log(typeof localStorage.getItem('local'));\n//     // console.log(localStorage.getItem('local'));\n\n//     // const data = localStorage.getItem('local');\n//     // const resp = JSON.parse(data);\n//     // console.log(resp);\n\n//     const data = JSON.parse(localStorage.getItem('local')) || [];\n//     console.log(data);\n//     data.forEach(element => {\n//         console.log(element);\n//     });\n// };\n\n// local.addEventListener('click', onLocal);\n\n// function onLocal() {\n//     // localStorage.setItem('local', 'hello local');\n//     // localStorage.setItem('local', arr);\n\n//     localStorage.setItem('local', JSON.stringify(arr));    \n//     localStorage.setItem('local-01', JSON.stringify(arr));    \n//     localStorage.setItem('local-02', JSON.stringify(arr));    \n// };\n\n// remove.addEventListener('click', onRemove);  \n\n// function onRemove() {\n//     // localStorage.removeItem('local');       // удалание 1 ключа  \n//     localStorage.clear();                     // удаление всех ключей\n// };\n\n\n// // 2. Безопасная передача\n\n// try {\n//     console.log(a);\n// } catch (error) {\n//     console.log(error);\n// };\n\n// console.log('hello world');\n\n\n// // 3. Рефакторинг SessionStorage и LocalStorage\n\n// const session = document.querySelector('.session');\n// const local = document.querySelector('.local');\n// const remove = document.querySelector('.remove');\n\n// session.addEventListener('click', onSession);\n// const arr = [1,2,3,4];\n\n// function onSession() {\n\n//     try {\n//         // const data = JSON.parse(localStorage.getItem('local')) || [];\n//         const data = JSON.parse(localStorage.getItem('local'));\n//         if (data.length <2) {\n//             // регистрация ошибки и передача ее в catch\n//             throw new Error('Array is empty');\n//         }    \n//         console.log(data);\n//         data.forEach(element => {\n//             console.log(element);\n//         });\n//     }   catch (error) {\n//             console.log(error);\n//     }   finally{\n//         console.log('hello world');\n//     } \n\n// };\n\n// local.addEventListener('click', onLocal);\n\n// function onLocal() {\n//     localStorage.setItem('local', 'arr');    \n//     localStorage.setItem('local-01', JSON.stringify(arr));    \n//     localStorage.setItem('local-02', JSON.stringify(arr));    \n// };\n\n// remove.addEventListener('click', onRemove);  \n\n// function onRemove() {\n//     localStorage.removeItem('local'); \n// };  \n\n\n// // 3. Игра крестики-нолики\n\nconst content = document.querySelector('.content');\nconst restart = document.querySelector('.js-restart');\n\ncontent.insertAdjacentHTML('beforeend', createMarkup());\ncontent.addEventListener('click', onClick);\nrestart.addEventListener('click', onRestart);\n\nconst X_KEY = 'PlayerX';\nconst O_KEY = 'PlayerO';\n\nlet player = 'X';\n\nlet stepX = JSON.parse(localStorage.getItem(X_KEY)) || [];\nlet stepO = JSON.parse(localStorage.getItem(O_KEY)) || [];\n\nconst win = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9],\n    [1, 4, 7],\n    [2, 5, 8],\n    [3, 6, 9],\n    [1, 5, 9],\n    [3, 5, 7],\n];\n\nfunction startGame() {\n    // console.log(stepX);\n    // console.log(stepO);\n    [...content.children].forEach(item => {\n        // console.dir(item.dataset.id);\n        const id = Number(item.dataset.id);\n\n        // console.log(id);\n        // console.log(stepX);\n        // console.log(stepX.includes(id));\n\n        if (stepX.includes(id)) {\n            item.textContent = 'X';\n        } else if (stepO.includes(id)){\n            item.textContent = 'O';\n        };\n    });\n};\nstartGame();\n\nfunction createMarkup() {\n    let markup = '';\n    for (let i = 1; i <= 9; i += 1) {\n        markup += `<div class=\"item\" data-id=\"${i}\"></div>`;\n    };    \n    return markup;\n};\n\nfunction onClick(evt) {\n    if (!evt.target.textContent) {\n        evt.target.textContent = player; \n        // console.dir(evt.target);\n        const id = Number(evt.target.dataset.id);  \n\n        let result = false;\n\n        if (player === \"X\") {\n            stepX.push(id);\n            // console.log(isWinner(stepX)); \n            localStorage.setItem(X_KEY, JSON.stringify(stepX));\n            result = isWinner(stepX);          \n        } else{\n            stepO.push(id);\n            localStorage.setItem(O_KEY, JSON.stringify(stepO));\n            result = isWinner(stepO); \n        }; \n\n        setTimeout(()=>{\n            if (result) {\n                alert(`Winner ${player}`);\n                onRestart(); \n                return;\n            }; \n            player = player === 'X' ? 'O' : 'X';\n        }); \n\n        // console.log('stepX', stepX);\n        // console.log('stepO', stepO);\n\n    } else {\n        alert('Change!')\n    };\n};\n\nfunction isWinner(arr) {\n    return win.some( item => \n        // console.log(item);\n        item.every( id => \n            // console.log(id);\n            arr.includes(id)\n            )        \n    );\n};\n\nfunction onRestart() {\n    player = 'X';\n    stepX = [];\n    stepO = [];\n\n    // localStorage.removeItem(X_KEY); \n    // localStorage.removeItem(O_KEY); \n    localStorage.clear();\n    \n    content.innerHTML = createMarkup(); \n};\n\n\n// // 4. Сервис для localStorage\n\n/**\n * \n * @param {*} key \n * @param {*} value \n */\n\n// const save = (key, value) => {\n//     try {\n//         const serializedState = JSON.stringify(value);\n//         localStorage.setItem(key, serializedState);\n//     } catch (error) {\n//         console.error(\"Set state error: \", error.message);\n//     }\n// };\n    \n// const load = key => {\n//     try {\n//         const serializedState = localStorage.getItem(key);\n//         return serializedState === null ? undefined : JSON.parse(serializedState);\n//     } catch (error) {\n//         console.error(\"Get state error: \", error.message);\n//     }\n// };\n\n// const remove = key => {\n//     try {\n//         const serializedState = localStorage.removeItem(key);\n//         return serializedState === null ? undefined : JSON.parse(serializedState);\n//     } catch (error) {\n//         console.error(\"Get state error: \", error.message);\n//     }\n// };\n    \n//     export default { save, load, remove };"],"names":["$38af80be5da2854c$var$content","document","querySelector","$38af80be5da2854c$var$restart","insertAdjacentHTML","$38af80be5da2854c$var$createMarkup","addEventListener","evt","target","textContent","alert","$38af80be5da2854c$var$player","id","Number","dataset","result","$38af80be5da2854c$var$stepX","push","localStorage","setItem","JSON","stringify","$38af80be5da2854c$var$isWinner","$38af80be5da2854c$var$stepO","setTimeout","$38af80be5da2854c$var$onRestart","parse","getItem","$38af80be5da2854c$var$win","markup","i","arr","some","item","every","includes","clear","innerHTML","children","forEach"],"version":3,"file":"goit-test-08-016.ead0b690.js.map"}